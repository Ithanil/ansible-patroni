# UFW-allow clients according to dict psql_clients
- name: Allow PSQL ports from specified clients
  community.general.ufw:
    rule: allow
    proto: tcp
    src: "{{ item.value.ip }}"
    port: "{{ psql_port }}"
    comment: "{{ item.key }}"
  loop: "{{ psql_clients | dict2items }}"
  when: psql_clients
